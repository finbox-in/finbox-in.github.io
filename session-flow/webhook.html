<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>BankConnect: Webhook | FinBox Documentation</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="Documentation for FinBox SDK">
    
    <link rel="preload" href="/assets/css/0.styles.2320aabd.css" as="style"><link rel="preload" href="/assets/js/app.f1ad2888.js" as="script"><link rel="preload" href="/assets/js/4.7f609412.js" as="script"><link rel="preload" href="/assets/js/2.a409744d.js" as="script"><link rel="preload" href="/assets/js/1.9be25c31.js" as="script"><link rel="preload" href="/assets/js/106.0e340ff0.js" as="script"><link rel="prefetch" href="/assets/js/100.b9a00bce.js"><link rel="prefetch" href="/assets/js/101.f1fab73c.js"><link rel="prefetch" href="/assets/js/102.91007e8b.js"><link rel="prefetch" href="/assets/js/103.3945f621.js"><link rel="prefetch" href="/assets/js/104.4d33e7db.js"><link rel="prefetch" href="/assets/js/105.9f9fe369.js"><link rel="prefetch" href="/assets/js/107.57b25d00.js"><link rel="prefetch" href="/assets/js/11.a81d671e.js"><link rel="prefetch" href="/assets/js/12.0c346857.js"><link rel="prefetch" href="/assets/js/13.59d89b18.js"><link rel="prefetch" href="/assets/js/14.473dec51.js"><link rel="prefetch" href="/assets/js/15.e28d3a0b.js"><link rel="prefetch" href="/assets/js/16.062030b1.js"><link rel="prefetch" href="/assets/js/17.37a5d2b1.js"><link rel="prefetch" href="/assets/js/18.120b49a6.js"><link rel="prefetch" href="/assets/js/19.d64eb9ef.js"><link rel="prefetch" href="/assets/js/20.80932b38.js"><link rel="prefetch" href="/assets/js/21.0e968812.js"><link rel="prefetch" href="/assets/js/22.2c093f2d.js"><link rel="prefetch" href="/assets/js/23.14acaf9e.js"><link rel="prefetch" href="/assets/js/24.440f9dc2.js"><link rel="prefetch" href="/assets/js/25.27f414f5.js"><link rel="prefetch" href="/assets/js/26.ed9d79d6.js"><link rel="prefetch" href="/assets/js/27.52227f32.js"><link rel="prefetch" href="/assets/js/28.d618af18.js"><link rel="prefetch" href="/assets/js/29.fd43e5e2.js"><link rel="prefetch" href="/assets/js/3.a6163b8f.js"><link rel="prefetch" href="/assets/js/30.3e4c521a.js"><link rel="prefetch" href="/assets/js/31.806a20bb.js"><link rel="prefetch" href="/assets/js/32.e7bb2a18.js"><link rel="prefetch" href="/assets/js/33.b0d644ad.js"><link rel="prefetch" href="/assets/js/34.59a51f1b.js"><link rel="prefetch" href="/assets/js/35.9b037c0c.js"><link rel="prefetch" href="/assets/js/36.025a2357.js"><link rel="prefetch" href="/assets/js/37.f6416c7b.js"><link rel="prefetch" href="/assets/js/38.78c214b3.js"><link rel="prefetch" href="/assets/js/39.8cfd613c.js"><link rel="prefetch" href="/assets/js/40.e651aad0.js"><link rel="prefetch" href="/assets/js/41.fc787887.js"><link rel="prefetch" href="/assets/js/42.cc19a1fa.js"><link rel="prefetch" href="/assets/js/43.1f01048a.js"><link rel="prefetch" href="/assets/js/44.0381b6da.js"><link rel="prefetch" href="/assets/js/45.f7cc88ac.js"><link rel="prefetch" href="/assets/js/46.be9e34cb.js"><link rel="prefetch" href="/assets/js/47.271bf426.js"><link rel="prefetch" href="/assets/js/48.c739361e.js"><link rel="prefetch" href="/assets/js/49.f3594208.js"><link rel="prefetch" href="/assets/js/5.d6aeb4c8.js"><link rel="prefetch" href="/assets/js/50.19ad9af9.js"><link rel="prefetch" href="/assets/js/51.6a1d35d9.js"><link rel="prefetch" href="/assets/js/52.d39172fa.js"><link rel="prefetch" href="/assets/js/53.9575aa46.js"><link rel="prefetch" href="/assets/js/54.0c56d067.js"><link rel="prefetch" href="/assets/js/55.1d53273e.js"><link rel="prefetch" href="/assets/js/56.3b52e90b.js"><link rel="prefetch" href="/assets/js/57.7a8c680e.js"><link rel="prefetch" href="/assets/js/58.1caba1dd.js"><link rel="prefetch" href="/assets/js/59.6c97d9b9.js"><link rel="prefetch" href="/assets/js/6.2927104c.js"><link rel="prefetch" href="/assets/js/60.a64cb9a6.js"><link rel="prefetch" href="/assets/js/61.216e68de.js"><link rel="prefetch" href="/assets/js/62.cfe61554.js"><link rel="prefetch" href="/assets/js/63.6ef4ecf2.js"><link rel="prefetch" href="/assets/js/64.364c9af2.js"><link rel="prefetch" href="/assets/js/65.d9e0bc7d.js"><link rel="prefetch" href="/assets/js/66.95f224a0.js"><link rel="prefetch" href="/assets/js/67.d70fb967.js"><link rel="prefetch" href="/assets/js/68.9cb098ff.js"><link rel="prefetch" href="/assets/js/69.f3d61396.js"><link rel="prefetch" href="/assets/js/7.87013b79.js"><link rel="prefetch" href="/assets/js/70.4d913911.js"><link rel="prefetch" href="/assets/js/71.b0ecd017.js"><link rel="prefetch" href="/assets/js/72.07d454af.js"><link rel="prefetch" href="/assets/js/73.dfefa1e0.js"><link rel="prefetch" href="/assets/js/74.d02f07ce.js"><link rel="prefetch" href="/assets/js/75.ad6ad5d6.js"><link rel="prefetch" href="/assets/js/76.45c478b5.js"><link rel="prefetch" href="/assets/js/77.1d92a756.js"><link rel="prefetch" href="/assets/js/78.0d51b3e4.js"><link rel="prefetch" href="/assets/js/79.8c655c54.js"><link rel="prefetch" href="/assets/js/8.f340bc97.js"><link rel="prefetch" href="/assets/js/80.a93a3b3a.js"><link rel="prefetch" href="/assets/js/81.33f765e0.js"><link rel="prefetch" href="/assets/js/82.314f317c.js"><link rel="prefetch" href="/assets/js/83.6e5c9c28.js"><link rel="prefetch" href="/assets/js/84.60744cb0.js"><link rel="prefetch" href="/assets/js/85.3a6d47b4.js"><link rel="prefetch" href="/assets/js/86.b105ca50.js"><link rel="prefetch" href="/assets/js/87.47f4ca9e.js"><link rel="prefetch" href="/assets/js/88.b53ebdf1.js"><link rel="prefetch" href="/assets/js/89.f3fc5cff.js"><link rel="prefetch" href="/assets/js/90.0cb1c50a.js"><link rel="prefetch" href="/assets/js/91.f06aeec9.js"><link rel="prefetch" href="/assets/js/92.81a385d4.js"><link rel="prefetch" href="/assets/js/93.285aa60e.js"><link rel="prefetch" href="/assets/js/94.af6873eb.js"><link rel="prefetch" href="/assets/js/95.1b60e247.js"><link rel="prefetch" href="/assets/js/96.f1ca28f9.js"><link rel="prefetch" href="/assets/js/97.0d8be63e.js"><link rel="prefetch" href="/assets/js/98.1da7185d.js"><link rel="prefetch" href="/assets/js/99.a49309cf.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.0464d051.js">
    <link rel="stylesheet" href="/assets/css/0.styles.2320aabd.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-692ea4ed><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/header.svg" alt="FinBox Documentation" class="logo"> <span class="site-name can-hide">FinBox Documentation</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/device-connect/" class="nav-link">
  DeviceConnect
</a></div><div class="nav-item"><a href="/session-flow/" class="nav-link router-link-active">
  BankConnect
</a></div><div class="nav-item"><a href="https://finbox.in" target="_blank" rel="noopener noreferrer" class="nav-link external">
  About
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/device-connect/" class="nav-link">
  DeviceConnect
</a></div><div class="nav-item"><a href="/session-flow/" class="nav-link router-link-active">
  BankConnect
</a></div><div class="nav-item"><a href="https://finbox.in" target="_blank" rel="noopener noreferrer" class="nav-link external">
  About
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/session-flow/" aria-current="page" class="sidebar-link">Overview</a></li><li><a href="/session-flow/basics.html" class="sidebar-link">Basics</a></li><li><a href="/session-flow/integration-steps.html" class="sidebar-link">Integration Pre-requisites</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/session-flow/integration-components.html" class="sidebar-heading clickable"><span>Integration Steps</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/session-flow/acceptance-criteria.html" class="sidebar-link">Acceptance Criteria</a></li><li><a href="/session-flow/management.html" class="sidebar-link">Management</a></li><li><a href="/session-flow/aa-onboarding.html" class="sidebar-link">Account Aggregator Onboarding</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="bankconnect-webhook"><a href="#bankconnect-webhook" class="header-anchor">#</a> BankConnect: Webhook</h1> <p>You can also configure a custom web hook to be invoked whenever the extraction process is completed or failed (because of extraction failure in manual mode or user entering the wrong credentials for example in net banking mode).</p> <p>To configure this, you have to share with us a <strong>valid endpoint</strong>.</p> <div class="custom-block tip"><p class="custom-block-title">A Valid Endpoint:</p> <ul><li>receives a POST request</li> <li>receives a request body with content-type <code>application/json</code></li> <li>returns a 200 status code on successful reception.</li></ul></div> <h2 id="authentication"><a href="#authentication" class="header-anchor">#</a> Authentication</h2> <p>FinBox BankConnect REST API uses API keys to authenticate requests. All API requests must be made over HTTPS. Calls made over plain HTTP will fail. API requests without authentication will also fail.</p> <p>To make a successful request, required <strong>headers mentioned with each API</strong> must be present in the request.</p> <p>In case wrong/incomplete/no keys were passed in headers, response will have <strong>401</strong> HTTP Code and payload as follows:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;detail&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Authentication credentials were not provided.&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="updating-web-hook-endpoint"><a href="#updating-web-hook-endpoint" class="header-anchor">#</a> Updating web hook endpoint</h2> <p>To update your valid endpoint use the API below:</p> <div class="custom-block tip"><p class="custom-block-title">Endpoint</p> <p>POST <strong>https://apis.bankconnect.finbox.in/bank-connect/v1/entity/update_webhook/</strong></p></div> <h3 id="authentication-2"><a href="#authentication-2" class="header-anchor">#</a> Authentication</h3> <p>Request headers <code>x-api-key</code> with API Key as value and <code>server-hash</code> with Server Hash as value must be present in request.</p> <h3 id="request-body"><a href="#request-body" class="header-anchor">#</a> Request Body</h3> <p>It receives following <strong>request body</strong> in <code>application/json</code> content type:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;webhook_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://postman-echo.com/post&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Here, <code>https://postman-echo.com/post</code> is an example for valid endpoint.</p> <h3 id="response"><a href="#response" class="header-anchor">#</a> Response</h3> <p>On updating the web hook endpoint successfully, the <code>update_webhook</code> API will give <strong>200 Status Code</strong>.</p> <div class="custom-block danger"><p class="custom-block-title">IMPORTANT</p> <p>By default web hook is enabled only for net banking mode, in case you want it to be enabled for manual mode as well, then you need to pass an additional field <code>webhook_mode</code> with a value <code>1</code>. Hence the payload will look like this:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;webhook_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://postman-echo.com/post&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;webhook_mode&quot;</span><span class="token operator">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Make sure to specify webhook mode every time you update webhook in case you want web hook to be invoked for both manual as well as net banking mode, if not specified <code>webhook_mode</code> will reset to the default value <code>0</code> (Net Banking Mode only)</p></div> <h2 id="receiving-payload"><a href="#receiving-payload" class="header-anchor">#</a> Receiving payload</h2> <p>We'll be sending JSON encoded body in the following payload format:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;entity_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;unique_entity_id&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;statement_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;unique_statement_id&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;link_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;link_id&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;progress&quot;</span><span class="token operator">:</span> <span class="token string">&quot;completed&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;reason&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Here, the <code>progress</code> field can be <code>completed</code> or <code>failed</code>. In case the value is <code>failed</code>, <code>reason</code> field will specify the reason for failure.</p> <p>In case of failure in Net Banking Mode, an actual upload might not have happened, as in case of wrong credentials entered by the user, hence <code>statement_id</code> will be unavailable, and will be a blank string <code>&quot;&quot;</code>. Similarly in the case of manual upload if <code>link_id</code> doesn't exist, its value will be <code>null</code>.</p> <h2 id="handling-cases-when-your-webhook-endpoint-is-down"><a href="#handling-cases-when-your-webhook-endpoint-is-down" class="header-anchor">#</a> Handling cases when your webhook endpoint is down</h2> <p>In case your webhook endpoint is down or a webhook call was failed, you can have the polling mechanism as a backup. However, the polling mechanism requires you to have the <code>entity_id</code>.</p> <p>In case you just have the <code>link_id</code> you can also request for all the webhook payloads for a given <code>link_id</code> using the following API:</p> <div class="custom-block tip"><p class="custom-block-title">Endpoint</p> <p>GET <strong>https://apis.bankconnect.finbox.in/bank-connect/v1/entity/webhook_payloads/?link_id=<code>link_id</code></strong></p></div> <h3 id="authentication-3"><a href="#authentication-3" class="header-anchor">#</a> Authentication</h3> <p>Request headers <code>x-api-key</code> with API Key as value and <code>server-hash</code> with Server Hash as value must be present in request.</p> <h3 id="response-2"><a href="#response-2" class="header-anchor">#</a> Response</h3> <p>Response format will be as follows:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;payloads&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;statement_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;STATEMENT_UUID4&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;entity_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ENTITY_UUID4&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;link_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;LINK ID HERE&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;progress&quot;</span><span class="token operator">:</span> <span class="token string">&quot;completed&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;reason&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;date_time&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-03-06 12:46:33&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        ....
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>This API returns the data in decreasing order of time, i.e. the latest payloads will be on top and the oldest on the bottom. In each of the payload there is an additional field <code>date_time</code> which indicates the date and time at which the webhook payload was supposed to be sent. <code>date_time</code> is in <code>YYYY-MM-DD HH:MM:SS</code> format.</p> <p>In case you have <code>entity_id</code> you can also poll the transactions API and check for the <code>progress</code> field.</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">12/26/2024, 7:38:37 AM</span></div></footer> <!----> <div class="footer" data-v-692ea4ed><p data-v-692ea4ed><span class="item" data-v-692ea4ed>Copyright Â© 2024</span> <span class="item" data-v-692ea4ed>Moshpit Technologies Pvt. Ltd.</span></p></div></main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.f1ad2888.js" defer></script><script src="/assets/js/4.7f609412.js" defer></script><script src="/assets/js/2.a409744d.js" defer></script><script src="/assets/js/1.9be25c31.js" defer></script><script src="/assets/js/106.0e340ff0.js" defer></script>
  </body>
</html>
